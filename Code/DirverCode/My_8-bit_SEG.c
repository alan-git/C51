/* *******************************************************************************************
/*程序名：	595驱动
/*设计者:	biubiu~~
/*编写时间：2016/08/11
/* ******************************************************************************************* */
#include "My_8-bit_SEG.H"

sbit SH_CP_U1 = P2^2;
sbit ST_CP_U1 = P2^3;	
sbit DS_U1 = P2^4;

/* *******************************************************************************************
//函数功能：595级联驱动；	
/* ******************************************************************************************* */
void Dis_Seg(u8 wei,u8 duan)         //第二级数据，第一级数据；
{
    u8 i;

    ST_CP_U1 = 0;
    for(i=0; i<8; i++)
    {
        SH_CP_U1 = 0;
        DS_U1 = (bit)(wei&0x80);    //数据从高位开始发送；
        SH_CP_U1 = 1;               //上升延时发送数据；
        wei <<= 1;
    }
    for(i=0; i<8; i++)
    {
        SH_CP_U1 = 0;
        DS_U1 = (bit)(duan&0x80);   //数据从高位开始发送；
        SH_CP_U1 = 1;               //上升延时发送数据；
        duan <<= 1;
    }
    ST_CP_U1 = 1;                   //锁存数据；
}